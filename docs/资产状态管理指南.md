# 资产状态管理指南

## 概述

数据资产管理平台提供了完善的资产生命周期管理功能,通过四种状态来标识资产的不同阶段。本文档详细介绍各个状态的含义、使用场景以及状态切换方式。

## 资产状态说明

### 1. 📝 草稿 (DRAFT)

#### 基本信息
- **状态码**: `DRAFT`
- **显示颜色**: 灰色 (默认)
- **图标**: 时钟 ⏰
- **优先级**: 最低

#### 含义
资产处于编辑或审核阶段,尚未正式发布到平台供用户使用。

#### 特点
- ❌ **不可申请**: 用户无法申请访问该资产
- 🔒 **有限可见**: 通常只有创建者和管理员可以看到
- ✏️ **可编辑**: 可以随时修改资产信息
- 🚫 **不出现在搜索**: 不会在公开的资产目录中显示

#### 适用场景
- 新创建的资产,信息尚未完善
- 资产信息需要审核,等待管理员批准
- 测试环境的资产,不对外开放
- 暂存的资产模板

---

### 2. ✅ 可用 (AVAILABLE)

#### 基本信息
- **状态码**: `AVAILABLE`
- **显示颜色**: 绿色 (#52c41a)
- **图标**: 对勾 ✓
- **优先级**: 最高

#### 含义
资产正常运行,已发布到平台,用户可以正常浏览和申请访问。

#### 特点
- ✅ **可申请**: 用户可以提交访问申请
- 👁️ **完全可见**: 所有用户都可以看到
- 🔍 **可搜索**: 出现在搜索结果和资产目录中
- 📊 **可统计**: 计入活跃资产统计

#### 适用场景
- 已完成测试验证的正式资产
- 数据质量良好,可以对外提供服务
- 元数据信息完整,文档齐全
- 已获得必要的审批和授权

---

### 3. 🔧 维护中 (MAINTENANCE)

#### 基本信息
- **状态码**: `MAINTENANCE`
- **显示颜色**: 橙色 (#faad14)
- **图标**: 工具 🔧
- **优先级**: 中等

#### 含义
资产正在进行维护、升级或数据更新,暂时无法提供服务。

#### 特点
- ❌ **暂不可申请**: 用户无法提交新的访问申请
- 👁️ **可见但受限**: 用户可以查看资产信息,但会看到维护提示
- 🔍 **可搜索**: 仍然出现在搜索结果中
- ⚠️ **状态提示**: 会显著提示用户资产正在维护

#### 适用场景
- 数据源进行定期维护或升级
- 数据质量问题需要修复
- 系统架构调整或迁移
- 权限配置变更
- 安全漏洞修复

#### 维护期间建议
- 提前通知已有访问权限的用户
- 在资产描述中说明预计维护时间
- 维护完成后及时恢复为"可用"状态
- 记录维护日志供后续追溯

---

### 4. ⛔ 已废弃 (DEPRECATED)

#### 基本信息
- **状态码**: `DEPRECATED`
- **显示颜色**: 红色 (#ff4d4f)
- **图标**: 停止 🛑
- **优先级**: 最低

#### 含义
资产已下线或计划淘汰,不再提供服务,但保留历史记录。

#### 特点
- ❌ **不可申请**: 完全无法申请访问
- 👁️ **有限可见**: 可能从公开目录中隐藏
- 🚫 **不推荐使用**: 系统会提示该资产已废弃
- 📝 **保留记录**: 不会被物理删除,保留历史数据

#### 适用场景
- 数据源已失效,无法继续提供数据
- 被新版本资产替代
- 业务需求变更,资产不再需要
- 数据质量长期无法达标
- 合规或安全原因需要下线

#### 废弃后建议
- 在描述中注明废弃原因
- 如有替代资产,提供替代资产链接
- 保留至少3-6个月后再考虑物理删除
- 通知所有曾经有访问权限的用户

---

## 状态切换流程

### 状态流转图

```
┌─────────┐
│  草稿   │ (DRAFT)
└────┬────┘
     │ 1. 发布
     ↓
┌─────────┐      2. 进入维护        ┌──────────┐
│  可用   │ ←──────────────────────→ │ 维护中   │
└────┬────┘      3. 完成维护        └──────────┘
     │
     │ 4. 下架
     ↓
┌─────────┐
│ 已废弃  │
└────┬────┘
     │ 5. 重新上架
     ↓
┌─────────┐
│  可用   │
└─────────┘
```

### 状态切换操作说明

#### 1. 草稿 → 可用 (发布)

**操作路径**:
- 资产管理 → 编辑资产 → 修改状态为"可用" → 保存

**前置条件**:
- ✅ 资产基本信息完整(名称、编码、分类等)
- ✅ 资产描述清晰,包含使用说明
- ✅ 字段定义完整,数据字典齐全
- ✅ 责任人已分配
- ✅ 权限控制策略已配置

**操作权限**: 资产管理员 (ASSET_MANAGER) 或系统管理员 (SYSTEM_ADMIN)

---

#### 2. 可用 ⇄ 维护中 (进入/退出维护)

**操作路径**:
- 资产管理 → 找到目标资产 → 编辑 → 修改状态 → 保存

**进入维护**:
- 将状态从"可用"改为"维护中"
- 建议在资产描述中添加维护说明和预计完成时间

**退出维护**:
- 维护完成后,将状态改回"可用"
- 更新资产描述,移除维护说明
- 测试验证资产功能正常

**操作权限**: 资产管理员或系统管理员

---

#### 3. 可用 → 已废弃 (下架)

**操作路径**:
- 资产管理 → 找到目标资产 → 点击"下架"按钮 → 确认

**操作说明**:
1. 点击资产行右侧的红色"下架"按钮
2. 系统弹出确认对话框:"确定要下架资产吗?下架后资产状态将变更为已废弃"
3. 点击"确认下架"
4. 系统自动将资产状态更新为 DEPRECATED

**影响范围**:
- 所有用户无法再申请该资产
- 资产在公开目录中可能被隐藏
- 已有的访问权限不受影响(可选择同时回收)
- 不会删除资产的历史数据和申请记录

**操作权限**: 资产管理员或系统管理员

**注意事项**:
- ⚠️ 下架是一个重要操作,确保已通知相关用户
- 建议在描述中记录下架原因和时间
- 如有替代资产,添加替代资产的引用链接

---

#### 4. 已废弃 → 可用 (重新上架)

**操作路径**:
- 资产管理 → 筛选"已废弃"状态 → 找到目标资产 → 点击"上架"按钮 → 确认

**操作说明**:
1. 在资产管理页面,筛选状态为"已废弃"的资产
2. 找到需要恢复的资产,点击绿色"上架"按钮
3. 系统弹出确认对话框:"确定要上架资产吗?上架后资产状态将变更为可用"
4. 点击"确认上架"
5. 系统自动将资产状态更新为 AVAILABLE

**前置条件**:
- ✅ 确认废弃原因已解决(数据源恢复、问题修复等)
- ✅ 重新验证资产数据质量
- ✅ 更新资产元数据和描述信息
- ✅ 确认权限配置仍然有效

**操作权限**: 资产管理员或系统管理员

**注意事项**:
- 上架后资产将立即对所有用户可见
- 建议更新资产描述,说明恢复情况
- 通知之前关注该资产的用户

---

## 状态管理最佳实践

### 1. 状态变更通知

建议在状态变更时通知相关方:

| 状态变更 | 需要通知的对象 |
|---------|---------------|
| 草稿 → 可用 | 资产订阅者、相关团队 |
| 可用 → 维护中 | 所有有访问权限的用户 |
| 维护中 → 可用 | 所有有访问权限的用户 |
| 可用 → 已废弃 | 所有有访问权限的用户、订阅者 |
| 已废弃 → 可用 | 之前的订阅者 |

### 2. 状态变更日志

系统会自动记录所有状态变更,包括:
- 变更时间
- 操作人
- 变更前后状态
- 变更原因(如果提供)

查看路径: 资产详情 → 版本历史 → 状态变更记录

### 3. 定期审查

建议定期审查资产状态:

**每月审查**:
- 检查"维护中"状态的资产,确认是否可以恢复
- 审查"草稿"状态超过30天的资产,决定是否发布或删除

**每季度审查**:
- 检查"已废弃"状态的资产,确认是否可以物理删除
- 统计各状态资产的数量和变化趋势

### 4. 状态变更审批

对于重要资产,建议启用状态变更审批流程:
- 草稿 → 可用: 需要数据管理员审批
- 可用 → 已废弃: 需要业务负责人审批
- 已废弃 → 可用: 需要数据质量检查

## 常见问题 (FAQ)

### Q1: 如何批量修改资产状态?

**答**: 目前系统支持单个资产的状态修改。如需批量操作,请联系系统管理员,可以通过后台脚本完成。

### Q2: 已废弃的资产会被自动删除吗?

**答**: 不会。已废弃的资产会永久保留在系统中,除非管理员手动删除。建议至少保留3-6个月的历史记录。

### Q3: 维护中的资产,已有的访问权限会被回收吗?

**答**: 不会。维护状态只影响新申请,不影响已授予的访问权限。如需临时回收权限,需要单独操作。

### Q4: 草稿状态的资产可以被其他用户看到吗?

**答**: 默认情况下,草稿状态的资产只有创建者和管理员可以看到。普通用户在浏览和搜索时看不到草稿资产。

### Q5: 如何查看某个资产的状态变更历史?

**答**: 进入资产详情页 → 点击"版本历史"标签 → 查看状态变更记录。

### Q6: 可以直接从草稿状态改为已废弃吗?

**答**: 可以,但不推荐。建议先发布为"可用"状态,验证后再决定是否废弃。

### Q7: 维护时间应该多长?

**答**: 建议维护时间不超过24小时。如需长期维护(超过3天),建议直接废弃该资产,维护完成后重新发布。

## 权限说明

不同角色对资产状态的操作权限:

| 角色 | 可见范围 | 可操作状态 | 说明 |
|-----|---------|-----------|------|
| 业务用户 (BUSINESS_USER) | 可用、维护中 | 无 | 只能查看,无法修改状态 |
| 资产管理员 (ASSET_MANAGER) | 全部 | 全部 | 可以修改所有资产的状态 |
| 系统管理员 (SYSTEM_ADMIN) | 全部 | 全部 | 拥有最高权限 |

## 统计指标

系统提供以下状态相关的统计指标:

- **总资产数**: 所有状态的资产总和
- **可用资产数**: AVAILABLE 状态的资产数量
- **维护中资产数**: MAINTENANCE 状态的资产数量
- **已废弃资产数**: DEPRECATED 状态的资产数量
- **草稿资产数**: DRAFT 状态的资产数量
- **资产可用率**: 可用资产数 / (总资产数 - 草稿数) × 100%

查看路径: 管理后台 → 仪表板 → 资产统计

## 相关文档

- [资产管理操作手册](./资产管理操作手册.md)
- [权限管理指南](./权限管理指南.md)
- [审批流程说明](./审批流程说明.md)
- [数据质量标准](./数据质量标准.md)

---

**文档版本**: v1.0
**最后更新**: 2024年1月
**维护者**: 数据平台团队
**反馈邮箱**: data-platform@company.com
